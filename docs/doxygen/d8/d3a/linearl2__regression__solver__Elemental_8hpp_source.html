<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Skylark (Sketching Library): /var/lib/jenkins/jobs/Skylark/workspace/algorithms/regression/linearl2_regression_solver_Elemental.hpp Source File</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Skylark (Sketching Library)
   &#160;<span id="projectnumber">0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/var/lib/jenkins/jobs/Skylark/workspace/algorithms/regression/linearl2_regression_solver_Elemental.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/d3a/linearl2__regression__solver__Elemental_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef SKYlARK_LINEARL2_REGRESSION_SOLVER_ELEMENTAL_HPP</span>
<a name="l00002"></a><a class="code" href="../../d8/d3a/linearl2__regression__solver__Elemental_8hpp.html#a600579e8637f87dcc64bbfa775cd2cff">00002</a> <span class="preprocessor"></span><span class="preprocessor">#define SKYLARK_LINEARL2_REGRESSION_SOLVER_ELEMENTAL_HPP</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;elemental.hpp&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;../../base/base.hpp&quot;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d20/regression__problem_8hpp.html">regression_problem.hpp</a>&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="keyword">namespace </span>skylark {
<a name="l00010"></a>00010 <span class="keyword">namespace </span>algorithms {
<a name="l00011"></a>00011 
<a name="l00022"></a>00022 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType&gt;
<a name="l00023"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html">00023</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00024"></a>00024     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#aa267ec3ee50656a3303b4045e7010131">Matrix</a>&lt;ValueType&gt;,
<a name="l00025"></a>00025                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00026"></a>00026     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#aa267ec3ee50656a3303b4045e7010131">Matrix</a>&lt;ValueType&gt;,
<a name="l00027"></a>00027     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#aa267ec3ee50656a3303b4045e7010131">Matrix</a>&lt;ValueType&gt;,
<a name="l00028"></a>00028     <a class="code" href="../../db/d5a/structskylark_1_1algorithms_1_1qr__l2__solver__tag.html" title="Tag for using QR to solve L2 linear regression problems.">qr_l2_solver_tag</a>&gt; {
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="keyword">public</span>:
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a2413d78076b396a76491bc67dcb6709d">00032</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a2413d78076b396a76491bc67dcb6709d">value_type</a>;
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ab2c62bce664baba960643f5b40da5e9b">00034</a>     <span class="keyword">typedef</span> elem::Matrix&lt;ValueType&gt; <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ab2c62bce664baba960643f5b40da5e9b">matrix_type</a>;
<a name="l00035"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a775f2ccabfd16de7a15899bafa07e13a">00035</a>     <span class="keyword">typedef</span> elem::Matrix&lt;ValueType&gt; <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a775f2ccabfd16de7a15899bafa07e13a">rhs_type</a>;
<a name="l00036"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a931c023ae3a3e01e5f8a6e807d360ce5">00036</a>     <span class="keyword">typedef</span> elem::Matrix&lt;ValueType&gt; <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a931c023ae3a3e01e5f8a6e807d360ce5">sol_type</a>;
<a name="l00037"></a>00037 
<a name="l00038"></a>00038     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;
<a name="l00039"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a8db8006788ddfaf8662c8f69a900c5f5">00039</a>         elem::Matrix&lt;ValueType&gt;, <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a8db8006788ddfaf8662c8f69a900c5f5">problem_type</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">private</span>:
<a name="l00042"></a>00042     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00043"></a>00043     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00044"></a>00044     <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ab2c62bce664baba960643f5b40da5e9b">matrix_type</a> _QR;
<a name="l00045"></a>00045     <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ab2c62bce664baba960643f5b40da5e9b">matrix_type</a> _t;
<a name="l00046"></a>00046     <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ab2c62bce664baba960643f5b40da5e9b">matrix_type</a> _R;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">public</span>:
<a name="l00054"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a8db0fcda5b097f2228d3fac0c074c261">00054</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00055"></a>00055         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {
<a name="l00056"></a>00056         <span class="comment">// TODO n &lt; m</span>
<a name="l00057"></a>00057         _QR = problem.input_matrix;
<a name="l00058"></a>00058         elem::QR(_QR, _t);
<a name="l00059"></a>00059         elem::LockedView(_R, _QR, 0, 0, _n, _n);
<a name="l00060"></a>00060     }
<a name="l00061"></a>00061 
<a name="l00068"></a><a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ac616291195c8c6a2c45db99be7beb421">00068</a>     <span class="keywordtype">void</span> <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#ac616291195c8c6a2c45db99be7beb421">solve</a>(<span class="keyword">const</span> <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a775f2ccabfd16de7a15899bafa07e13a">rhs_type</a>&amp; B, <a class="code" href="../../d2/de7/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1Matri1bbce85a06c45e19b396078041669d12.html#a775f2ccabfd16de7a15899bafa07e13a">rhs_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00069"></a>00069         <span class="comment">// TODO error checking</span>
<a name="l00070"></a>00070         X = B;
<a name="l00071"></a>00071         elem::qr::ApplyQ(elem::LEFT, elem::ADJOINT, _QR, _t, X);
<a name="l00072"></a>00072         X.Resize(_n, B.Width());
<a name="l00073"></a>00073         elem::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00074"></a>00074             1.0, _R, X, <span class="keyword">true</span>);
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076 };
<a name="l00077"></a>00077 
<a name="l00088"></a>00088 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType&gt;
<a name="l00089"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html">00089</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00090"></a>00090     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00091"></a>00091                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00092"></a>00092     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00093"></a>00093     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00094"></a>00094     <a class="code" href="../../db/d5a/structskylark_1_1algorithms_1_1qr__l2__solver__tag.html" title="Tag for using QR to solve L2 linear regression problems.">qr_l2_solver_tag</a>&gt; {
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="keyword">public</span>:
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a296d90aef3edc45a8d267d92d52a8e0b">00098</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a296d90aef3edc45a8d267d92d52a8e0b">value_type</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a96360175c4f70f9dd36f6ad26aaae8c5">00100</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a96360175c4f70f9dd36f6ad26aaae8c5">matrix_type</a>;
<a name="l00101"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a9d95a19a1a9e15d10eae7026ee6e81f8">00101</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a9d95a19a1a9e15d10eae7026ee6e81f8">rhs_type</a>;
<a name="l00102"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a0a5ba020d00dab01025974abe8de7a46">00102</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a0a5ba020d00dab01025974abe8de7a46">sol_type</a>;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;
<a name="l00105"></a>00105         elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00106"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#ab7b30246faf7d6265d4add8e9f9f116c">00106</a>         <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#ab7b30246faf7d6265d4add8e9f9f116c">problem_type</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="keyword">private</span>:
<a name="l00109"></a>00109     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00110"></a>00110     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00111"></a>00111     <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a96360175c4f70f9dd36f6ad26aaae8c5">matrix_type</a> _QR;
<a name="l00112"></a>00112     <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a96360175c4f70f9dd36f6ad26aaae8c5">matrix_type</a> _t;
<a name="l00113"></a>00113     <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a96360175c4f70f9dd36f6ad26aaae8c5">matrix_type</a> _R;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="keyword">public</span>:
<a name="l00121"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a37a81c5858ad2f844619262a5f3363bd">00121</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00122"></a>00122         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {
<a name="l00123"></a>00123         <span class="comment">// TODO n &lt; m</span>
<a name="l00124"></a>00124         _QR = problem.input_matrix;
<a name="l00125"></a>00125         elem::QR(_QR.Matrix(), _t.Matrix());
<a name="l00126"></a>00126         elem::LockedView(_R.Matrix(), _QR.Matrix(), 0, 0, _n, _n);
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00135"></a><a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a5d583c06f59af9a0fb9d78994eae560f">00135</a>     <span class="keywordtype">void</span> <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a5d583c06f59af9a0fb9d78994eae560f">solve</a>(<span class="keyword">const</span> <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a9d95a19a1a9e15d10eae7026ee6e81f8">rhs_type</a>&amp; B, <a class="code" href="../../d9/d64/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMabe6364e16b0a954fd640d392d0b89c7.html#a9d95a19a1a9e15d10eae7026ee6e81f8">rhs_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00136"></a>00136         <span class="comment">// TODO error checking</span>
<a name="l00137"></a>00137         X = B;
<a name="l00138"></a>00138         elem::qr::ApplyQ(elem::LEFT, elem::ADJOINT,
<a name="l00139"></a>00139             _QR.LockedMatrix(), _t.LockedMatrix(), X.Matrix());
<a name="l00140"></a>00140         X.Resize(_n, B.Width());
<a name="l00141"></a>00141         elem::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00142"></a>00142             1.0, _R.LockedMatrix(), X.Matrix(), <span class="keyword">true</span>);
<a name="l00143"></a>00143     }
<a name="l00144"></a>00144 };
<a name="l00145"></a>00145 
<a name="l00156"></a>00156 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType&gt;
<a name="l00157"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html">00157</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00158"></a>00158     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType&gt;,
<a name="l00159"></a>00159                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00160"></a>00160     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType&gt;,
<a name="l00161"></a>00161     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType&gt;,
<a name="l00162"></a>00162     <a class="code" href="../../db/d5a/structskylark_1_1algorithms_1_1qr__l2__solver__tag.html" title="Tag for using QR to solve L2 linear regression problems.">qr_l2_solver_tag</a>&gt; {
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 <span class="keyword">public</span>:
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a95076ae286617ec8ae20650ef7821579">00166</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a95076ae286617ec8ae20650ef7821579">value_type</a>;
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a75637f5e3e1d89748f497ed36f438eb1">00168</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType&gt; <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a75637f5e3e1d89748f497ed36f438eb1">matrix_type</a>;
<a name="l00169"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#ac4e8748d6feaa1ee1ad0abc8faf31c10">00169</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType&gt; <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#ac4e8748d6feaa1ee1ad0abc8faf31c10">rhs_type</a>;
<a name="l00170"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a1ce930449f273b42597c391da4c9676b">00170</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType&gt; <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a1ce930449f273b42597c391da4c9676b">sol_type</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;<a class="code" href="../../d8/d1e/regression_8cpp.html#ab8e88f4957c67881617f8fd9ba9099e6">matrix_type</a>,
<a name="l00173"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#acce3ab478d9e6242520d57c06f16851a">00173</a>                                  <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#acce3ab478d9e6242520d57c06f16851a">problem_type</a>;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="keyword">private</span>:
<a name="l00176"></a>00176     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00177"></a>00177     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00178"></a>00178     <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a75637f5e3e1d89748f497ed36f438eb1">matrix_type</a> _QR;
<a name="l00179"></a>00179     <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a75637f5e3e1d89748f497ed36f438eb1">matrix_type</a> _R;
<a name="l00180"></a>00180     elem::DistMatrix&lt;ValueType, elem::MD, elem::STAR&gt; _t;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="keyword">public</span>:
<a name="l00188"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a201c359e92dd74f4ce8a77389a6f8c97">00188</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00189"></a>00189         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>),
<a name="l00190"></a>00190         _QR(problem.input_matrix.Grid()), _R(problem.input_matrix.Grid()),
<a name="l00191"></a>00191         _t(problem.input_matrix.Grid()) {
<a name="l00192"></a>00192         <span class="comment">// TODO n &lt; m</span>
<a name="l00193"></a>00193         _QR = problem.input_matrix;
<a name="l00194"></a>00194         elem::QR(_QR, _t);
<a name="l00195"></a>00195         elem::LockedView(_R, _QR, 0, 0, _n, _n);
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00204"></a><a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a13eee4185d1f92795015d86f76d251cb">00204</a>     <span class="keywordtype">void</span> <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a13eee4185d1f92795015d86f76d251cb">solve</a> (<span class="keyword">const</span> <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#ac4e8748d6feaa1ee1ad0abc8faf31c10">rhs_type</a>&amp; B, <a class="code" href="../../d5/d31/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf4fc5a9ed8853307d16e8a43df1e4060.html#a1ce930449f273b42597c391da4c9676b">sol_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00205"></a>00205         <span class="comment">// TODO error checking</span>
<a name="l00206"></a>00206         X = B;
<a name="l00207"></a>00207         elem::qr::ApplyQ(elem::LEFT, elem::ADJOINT, _QR, _t, X);
<a name="l00208"></a>00208         X.Resize(_n, B.Width());
<a name="l00209"></a>00209         elem::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00210"></a>00210             1.0, _R, X);
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 };
<a name="l00213"></a>00213 
<a name="l00225"></a>00225 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, elem::Distribution VD&gt;
<a name="l00226"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html">00226</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00227"></a>00227     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00228"></a>00228                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00229"></a>00229     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00230"></a>00230     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00231"></a>00231     <a class="code" href="../../db/d5a/structskylark_1_1algorithms_1_1qr__l2__solver__tag.html" title="Tag for using QR to solve L2 linear regression problems.">qr_l2_solver_tag</a>&gt; {
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="keyword">public</span>:
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#af7077b11333a09d4c4a73024b56b7303">00235</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#af7077b11333a09d4c4a73024b56b7303">value_type</a>;
<a name="l00236"></a>00236 
<a name="l00237"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a6a862930e23d7adb63bacd07a8fc7686">00237</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a6a862930e23d7adb63bacd07a8fc7686">matrix_type</a>;
<a name="l00238"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#ae2c59ae4fef1105b54dd62451fa6b300">00238</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#ae2c59ae4fef1105b54dd62451fa6b300">rhs_type</a>;
<a name="l00239"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a318f7e6a7f1950e7ea00a131cf945125">00239</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a318f7e6a7f1950e7ea00a131cf945125">sol_type</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;<a class="code" href="../../d8/d1e/regression_8cpp.html#ab8e88f4957c67881617f8fd9ba9099e6">matrix_type</a>,
<a name="l00242"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#abc4aeece0fa2b7fe06998db037040f8b">00242</a>                                  <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#abc4aeece0fa2b7fe06998db037040f8b">problem_type</a>;
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="keyword">private</span>:
<a name="l00245"></a>00245     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00246"></a>00246     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00247"></a>00247     <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a6a862930e23d7adb63bacd07a8fc7686">matrix_type</a> _Q;
<a name="l00248"></a>00248     <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a318f7e6a7f1950e7ea00a131cf945125">sol_type</a> _R;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">public</span>:
<a name="l00256"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#ad773b0dc1d26a62090404c308b42ce01">00256</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00257"></a>00257         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>),
<a name="l00258"></a>00258         _Q(problem.input_matrix.Grid()), _R(problem.input_matrix.Grid()) {
<a name="l00259"></a>00259         <span class="comment">// TODO n &lt; m ???</span>
<a name="l00260"></a>00260         _Q = problem.input_matrix;
<a name="l00261"></a>00261         elem::qr::ExplicitTS(_Q, _R);
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00270"></a><a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a13b88b7f381a86f030e9fe55104167e1">00270</a>     <span class="keywordtype">void</span> <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a13b88b7f381a86f030e9fe55104167e1">solve</a> (<span class="keyword">const</span> <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#ae2c59ae4fef1105b54dd62451fa6b300">rhs_type</a>&amp; B, <a class="code" href="../../d5/d5c/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistM6c2ffb48da8f582190ff4d59aeac70f4.html#a318f7e6a7f1950e7ea00a131cf945125">sol_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00271"></a>00271         <span class="comment">// TODO error checking</span>
<a name="l00272"></a>00272 
<a name="l00273"></a>00273         <a class="code" href="../../d3/d18/namespaceskylark_1_1base.html#a8f7ed6aa7741ff54e546fa88fc706a53">base::Gemm</a>(elem::ADJOINT, elem::NORMAL, 1.0, _Q, B, X);
<a name="l00274"></a>00274         base::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00275"></a>00275             1.0, _R, X);
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 };
<a name="l00279"></a>00279 
<a name="l00291"></a>00291 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, elem::Distribution VD&gt;
<a name="l00292"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html">00292</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00293"></a>00293     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00294"></a>00294                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00295"></a>00295     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00296"></a>00296     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00297"></a>00297     <a class="code" href="../../d7/d06/structskylark_1_1algorithms_1_1svd__l2__solver__tag.html" title="Tag for using SVD to solve L2 linear regression problems.">svd_l2_solver_tag</a>&gt; {
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 <span class="keyword">public</span>:
<a name="l00300"></a>00300 
<a name="l00301"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a1b05732cd5da49ad9120284f8514e722">00301</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a1b05732cd5da49ad9120284f8514e722">value_type</a>;
<a name="l00302"></a>00302 
<a name="l00303"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a20f4996c7128a6c8c7c6bbf294698cd8">00303</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a20f4996c7128a6c8c7c6bbf294698cd8">matrix_type</a>;
<a name="l00304"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#af4af9d0e7abb82133d8fb388eb89778d">00304</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#af4af9d0e7abb82133d8fb388eb89778d">rhs_type</a>;
<a name="l00305"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#ad2b82cb88018ba0d6e7fd82f1eadacd6">00305</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#ad2b82cb88018ba0d6e7fd82f1eadacd6">sol_type</a>;
<a name="l00306"></a>00306 
<a name="l00307"></a>00307     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;<a class="code" href="../../d8/d1e/regression_8cpp.html#ab8e88f4957c67881617f8fd9ba9099e6">matrix_type</a>,
<a name="l00308"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a09b55f3594a34424b20e5cc2bae1be3b">00308</a>                                  <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a09b55f3594a34424b20e5cc2bae1be3b">problem_type</a>;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="keyword">private</span>:
<a name="l00311"></a>00311     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00312"></a>00312     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00313"></a>00313     <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#a20f4996c7128a6c8c7c6bbf294698cd8">matrix_type</a> _U;
<a name="l00314"></a>00314     <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#ad2b82cb88018ba0d6e7fd82f1eadacd6">sol_type</a> _S, _V;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="keyword">public</span>:
<a name="l00322"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#af8a11c74fc2a43e9928989d3fdd21c13">00322</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00323"></a>00323         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>),
<a name="l00324"></a>00324         _U(problem.input_matrix.Grid()), _S(problem.input_matrix.Grid()),
<a name="l00325"></a>00325         _V(problem.input_matrix.Grid()) {
<a name="l00326"></a>00326         <span class="comment">// TODO n &lt; m ???</span>
<a name="l00327"></a>00327         _U = problem.input_matrix;
<a name="l00328"></a>00328         base::SVD(_U, _S, _V);
<a name="l00329"></a>00329         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; _S.Height(); i++)
<a name="l00330"></a>00330             _S.Set(i, 0, 1 / _S.Get(i, 0));   <span class="comment">// TODO handle rank deficiency</span>
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332 
<a name="l00339"></a><a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#abb7a9b0becb54a88f2c0801ad75c4a10">00339</a>     <span class="keywordtype">void</span> <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#abb7a9b0becb54a88f2c0801ad75c4a10">solve</a> (<span class="keyword">const</span> <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#af4af9d0e7abb82133d8fb388eb89778d">rhs_type</a>&amp; B, <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#ad2b82cb88018ba0d6e7fd82f1eadacd6">sol_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00340"></a>00340         <span class="comment">// TODO error checking</span>
<a name="l00341"></a>00341         <a class="code" href="../../d4/d61/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMeba1003ef744d2260bf37235bb520722.html#ad2b82cb88018ba0d6e7fd82f1eadacd6">sol_type</a> UB(X); <span class="comment">// Not copying -- just taking grid and size.</span>
<a name="l00342"></a>00342         <a class="code" href="../../d3/d18/namespaceskylark_1_1base.html#a8f7ed6aa7741ff54e546fa88fc706a53">base::Gemm</a>(elem::ADJOINT, elem::NORMAL, 1.0, _U, B, UB);
<a name="l00343"></a>00343         elem::DiagonalScale(elem::LEFT, elem::NORMAL, _S, UB);
<a name="l00344"></a>00344         <a class="code" href="../../d3/d18/namespaceskylark_1_1base.html#a8f7ed6aa7741ff54e546fa88fc706a53">base::Gemm</a>(elem::NORMAL, elem::NORMAL, 1.0, _V, UB, X);
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 };
<a name="l00348"></a>00348 
<a name="l00363"></a>00363 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, elem::Distribution VD&gt;
<a name="l00364"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html">00364</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00365"></a>00365     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00366"></a>00366                          <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00367"></a>00367     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00368"></a>00368     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00369"></a>00369     <a class="code" href="../../d9/dd9/structskylark_1_1algorithms_1_1sne__l2__solver__tag.html" title="Tag for using semi-normal equations to solve L2 linear regression problems.">sne_l2_solver_tag</a>&gt; {
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="keyword">public</span>:
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a0ae4e8e7a47dc034741fd7ab1b260bbe">00373</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a0ae4e8e7a47dc034741fd7ab1b260bbe">value_type</a>;
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a96913329974579867e7ba7b37d52216c">00375</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a96913329974579867e7ba7b37d52216c">matrix_type</a>;
<a name="l00376"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a7c58f2abee4b1d8cd5b0904199bcdd92">00376</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a7c58f2abee4b1d8cd5b0904199bcdd92">rhs_type</a>;
<a name="l00377"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#ad563cea19b23ab14e66ddcaf539ab0c1">00377</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#ad563cea19b23ab14e66ddcaf539ab0c1">sol_type</a>;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;<a class="code" href="../../d8/d1e/regression_8cpp.html#ab8e88f4957c67881617f8fd9ba9099e6">matrix_type</a>,
<a name="l00380"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a61be5440e5d6359e963e815d9794d477">00380</a>                                  <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a61be5440e5d6359e963e815d9794d477">problem_type</a>;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="keyword">private</span>:
<a name="l00383"></a>00383     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00384"></a>00384     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00385"></a>00385     <span class="keyword">const</span> <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a96913329974579867e7ba7b37d52216c">matrix_type</a>&amp; _A;
<a name="l00386"></a>00386     <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#ad563cea19b23ab14e66ddcaf539ab0c1">sol_type</a> _R;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 <span class="keyword">public</span>:
<a name="l00394"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a337a8d8c69882d414bd1e6142a16bbbb">00394</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00395"></a>00395         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>),
<a name="l00396"></a>00396         _A(problem.input_matrix), _R(problem.input_matrix.Grid()) {
<a name="l00397"></a>00397         <span class="comment">// TODO n &lt; m ???</span>
<a name="l00398"></a>00398         <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a96913329974579867e7ba7b37d52216c">matrix_type</a> _Q = problem.input_matrix;
<a name="l00399"></a>00399         elem::qr::ExplicitTS(_Q, _R);
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401 
<a name="l00408"></a><a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a9dab3e7ff06023a02375ca7f11891e8b">00408</a>     <span class="keywordtype">void</span> <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a9dab3e7ff06023a02375ca7f11891e8b">solve</a> (<span class="keyword">const</span> <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#a7c58f2abee4b1d8cd5b0904199bcdd92">rhs_type</a>&amp; B, <a class="code" href="../../d6/d07/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01elem_1_1DistMf8f17344afcd4f46ea153050aeee1708.html#ad563cea19b23ab14e66ddcaf539ab0c1">sol_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00409"></a>00409         <span class="comment">// TODO error checking</span>
<a name="l00410"></a>00410 
<a name="l00411"></a>00411         <a class="code" href="../../d3/d18/namespaceskylark_1_1base.html#a8f7ed6aa7741ff54e546fa88fc706a53">base::Gemm</a>(elem::ADJOINT, elem::NORMAL, 1.0, _A, B, X);
<a name="l00412"></a>00412         base::Trsm(elem::LEFT, elem::UPPER, elem::ADJOINT, elem::NON_UNIT,
<a name="l00413"></a>00413             1.0, _R, X);
<a name="l00414"></a>00414         base::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00415"></a>00415             1.0, _R, X);
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 };
<a name="l00419"></a>00419 
<a name="l00435"></a>00435 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, elem::Distribution VD&gt;
<a name="l00436"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html">00436</a> <span class="keyword">class </span><a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>&lt;
<a name="l00437"></a>00437     <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;
<a name="l00438"></a>00438         base::computed_matrix_t&lt; elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; &gt;,
<a name="l00439"></a>00439         <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt;,
<a name="l00440"></a>00440     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, VD, elem::STAR&gt;,
<a name="l00441"></a>00441     elem::<a class="code" href="../../dc/d74/capi_8cpp.html#a19350ba69c004b01dece9951a3477dc9">DistMatrix</a>&lt;ValueType, elem::STAR, elem::STAR&gt;,
<a name="l00442"></a>00442     <a class="code" href="../../d9/dd9/structskylark_1_1algorithms_1_1sne__l2__solver__tag.html" title="Tag for using semi-normal equations to solve L2 linear regression problems.">sne_l2_solver_tag</a>&gt; {
<a name="l00443"></a>00443 
<a name="l00444"></a>00444 <span class="keyword">public</span>:
<a name="l00445"></a>00445 
<a name="l00446"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a73adc77a6d216274cb92ed703e76c422">00446</a>     <span class="keyword">typedef</span> ValueType <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a73adc77a6d216274cb92ed703e76c422">value_type</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="keyword">typedef</span> <a class="code" href="../../d1/dfc/structskylark_1_1base_1_1computed__matrix__t.html">base::computed_matrix_t&lt; elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt;</a> &gt;
<a name="l00449"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a85b609b9db8956d14f4b58c8042390bb">00449</a>     <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a85b609b9db8956d14f4b58c8042390bb">matrix_type</a>;
<a name="l00450"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#ac9662dcdabb64799e027ad2195c83e1a">00450</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#ac9662dcdabb64799e027ad2195c83e1a">rhs_type</a>;
<a name="l00451"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0e9b6cf41808179396b6672ac2047de7">00451</a>     <span class="keyword">typedef</span> elem::DistMatrix&lt;ValueType, elem::STAR, elem::STAR&gt; <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0e9b6cf41808179396b6672ac2047de7">sol_type</a>;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453     <span class="keyword">typedef</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">regression_problem_t</a>&lt;<a class="code" href="../../d8/d1e/regression_8cpp.html#ab8e88f4957c67881617f8fd9ba9099e6">matrix_type</a>,
<a name="l00454"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0062a8ddbd70044f9d6add00bec4a73b">00454</a>                                  <a class="code" href="../../de/d2a/structskylark_1_1algorithms_1_1linear__tag.html" title="Tag for specifying a linear regression.">linear_tag</a>, <a class="code" href="../../d9/d41/structskylark_1_1algorithms_1_1l2__tag.html" title="Tag for specifying a L2 norm.">l2_tag</a>, <a class="code" href="../../d1/d64/structskylark_1_1algorithms_1_1no__reg__tag.html">no_reg_tag</a>&gt; <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0062a8ddbd70044f9d6add00bec4a73b">problem_type</a>;
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 <span class="keyword">private</span>:
<a name="l00457"></a>00457     <span class="keyword">const</span> <span class="keywordtype">int</span> _m;
<a name="l00458"></a>00458     <span class="keyword">const</span> <span class="keywordtype">int</span> _n;
<a name="l00459"></a>00459     <span class="keyword">const</span> <a class="code" href="../../d1/dfc/structskylark_1_1base_1_1computed__matrix__t.html">matrix_type</a>&amp; _A;
<a name="l00460"></a>00460     <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0e9b6cf41808179396b6672ac2047de7">sol_type</a> _R;
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="keyword">public</span>:
<a name="l00468"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a3da1a6405ee655cfebf99b986eeb621f">00468</a>     <a class="code" href="../../d9/dfc/classskylark_1_1algorithms_1_1regression__solver__t.html">regression_solver_t</a>(<span class="keyword">const</span> <a class="code" href="../../db/d5b/structskylark_1_1algorithms_1_1regression__problem__t.html">problem_type</a>&amp; problem) :
<a name="l00469"></a>00469         _m(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#a0d2d8836216fc94b61aa0824eb239db2">m</a>), _n(problem.<a class="code" href="../../d8/d1e/regression_8cpp.html#acfc02ec89670db29251fda6a66602ce2">n</a>),_A(problem.input_matrix)  {
<a name="l00470"></a>00470         <span class="comment">// TODO n &lt; m ???</span>
<a name="l00471"></a>00471         elem::DistMatrix&lt;ValueType, VD, elem::STAR&gt; _Q =
<a name="l00472"></a>00472             problem.input_matrix.materialize();
<a name="l00473"></a>00473         elem::qr::ExplicitTS(_Q, _R);
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475 
<a name="l00482"></a><a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a88c8315f2ce8140bc96190e0146c8801">00482</a>     <span class="keywordtype">void</span> <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a88c8315f2ce8140bc96190e0146c8801">solve</a> (<span class="keyword">const</span> <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#ac9662dcdabb64799e027ad2195c83e1a">rhs_type</a>&amp; B, <a class="code" href="../../d2/d3d/classskylark_1_1algorithms_1_1regression__solver__t_3_01regression__problem__t_3_01base_1_1compudb9c1b22f2906f601a9113aa84123acb.html#a0e9b6cf41808179396b6672ac2047de7">sol_type</a>&amp; X)<span class="keyword"> const </span>{
<a name="l00483"></a>00483         <span class="comment">// TODO error checking</span>
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         <a class="code" href="../../d3/d18/namespaceskylark_1_1base.html#a8f7ed6aa7741ff54e546fa88fc706a53">base::Gemm</a>(elem::ADJOINT, elem::NORMAL, 1.0, _A, B, X);
<a name="l00486"></a>00486         base::Trsm(elem::LEFT, elem::UPPER, elem::ADJOINT, elem::NON_UNIT,
<a name="l00487"></a>00487             1.0, _R, X);
<a name="l00488"></a>00488         base::Trsm(elem::LEFT, elem::UPPER, elem::NORMAL, elem::NON_UNIT,
<a name="l00489"></a>00489             1.0, _R, X);
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 };
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 } } 
<a name="l00496"></a>00496 <span class="preprocessor">#endif // SKYLARK_LINEARL2_REGRESSION_SOLVER_ELEMENTAL_HPP</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 5 2014 02:49:11 for Skylark (Sketching Library) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
